<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">


    <bean class="no.kantega.forum.search.ForumSearchController" />

    <bean class="no.kantega.forum.listeners.ForumIndexListener"/>
    <bean class="no.kantega.forum.provider.DefaultForumProvider"/>

    <bean id="forumSessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean" destroy-method="destroy">
      <property name="dataSource" ref="forumDataSource"/>
      <property name="mappingResources" value="forum.hbm.xml"/>
      <property name="hibernateProperties">
        <props>
          <prop key="hibernate.dialect">${forum.dialect.hibernate3}</prop>
          <prop key="hibernate.show_sql">false</prop>
          <prop key="hibernate.cache.provider_class">org.hibernate.cache.EhCacheProvider</prop>
          <prop key="hibernate.cache.provider_configuration_file_resource_path">/forum-ehcache.xml</prop>
          <prop key="net.sf.ehcache.configurationResourceName">/forum-ehcache.xml</prop>
        </props>
      </property>
      <property name="schemaUpdate" value="true"/>
    </bean>

    <bean id="forumHibernateTemplate" class="org.springframework.orm.hibernate3.HibernateTemplate">
      <property name="sessionFactory">
        <ref local="forumSessionFactory"/>
      </property>
    </bean>


    <bean id="forumDao" class="no.kantega.forum.dao.ForumDao">
      <property name="template">
        <ref local="forumHibernateTemplate"/>
      </property>
    </bean>

    <bean id="forumPermissionManager" class="no.kantega.forum.permission.DefaultPermissionManager">
        <property name="groupResolver" ref="groupResolver"/>
        <property name="administratorGroups" value="${forum.administratorgroups}"/>
    </bean>

    <bean id="forumPostRatingNotificationListener" class="no.kantega.forum.listeners.PostRatingNotificationListener">
        <property name="dao" ref="forumDao"/>
    </bean>

    <bean id="forumDeletePostOrThreadNotificationListener" class="no.kantega.forum.listeners.ForumDeletePostOrThreadNotificationListener">
        <property name="ratingService" ref="ratingService"/>
    </bean>

    <bean id="forumCommentNotificationListener" class="no.kantega.publishing.comments.ContentCommentNotificationListener"/>

      <bean id="forumPostService" class="no.kantega.forum.service.ForumPostService">
        <constructor-arg ref="forumDao"/>
    </bean>

    <bean id="commentNotificationForumListener" class="no.kantega.forum.listeners.CommentNotificationForumListener">
        <constructor-arg ref="forumDao"/>
    </bean>

    <bean id="groupResolver" class="no.kantega.modules.user.AksessGroupResolver"/>

    <bean id="groupManager" class="no.kantega.modules.user.AksessGroupManager"/>

</beans>